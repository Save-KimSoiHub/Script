local a = http_request or request or (syn and syn.request) or (fluxus and fluxus.request)
if not a then
    warn("❌ Exploit HTTP request not supported!")
    return
end

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer or Players:GetPropertyChangedSignal("LocalPlayer"):Wait()

-- Đợi GUI Servertime hiển thị
repeat RunService.RenderStepped:Wait() until LocalPlayer:FindFirstChild("PlayerGui")
local gui = LocalPlayer:WaitForChild("PlayerGui")

-- Lấy phút hiện tại từ dòng Servertime
local function getServerMinute()
    while true do
        for _, g in ipairs(gui:GetDescendants()) do
            if g:IsA("TextLabel") then
                local hour, minute, second = string.match(g.Text, "Servertime:%s*(%d+):(%d+):(%d+)")
                if hour and minute and second then
                    return tonumber(minute)
                end
            end
        end
        RunService.RenderStepped:Wait()
    end
end

-- Lấy thông tin server
local serverMinute = getServerMinute()
local jobId = game.JobId
local placeId = game.PlaceId

print("✅ Server minute:", serverMinute)

-- Gửi request duy nhất
local url = string.format(
    "https://script.google.com/macros/s/AKfycbxyCIRzSoA7yqrEbD4ugjSIbquMVRsEqmZB4BahbnK3XshyxQaOdXZOC6yYQ6LrvDw/exec?jobid=%s&placeid=%s&minute=%d&boss=false",
    jobId, placeId, serverMinute
)

local success, response = pcall(function()
    return a({ Url = url, Method = "GET" })
end)

if success then
    print("✅ Gửi thành công:", response.Body)
else
    warn("❌ Gửi thất bại:", response)
end
