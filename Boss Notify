local a = http_request or request or (syn and syn.request) or (fluxus and fluxus.request)
if not a then
    warn("‚ùå Exploit HTTP request not supported!")
    return
end

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer or Players:GetPropertyChangedSignal("LocalPlayer"):Wait()
repeat wait() until LocalPlayer:FindFirstChild("PlayerGui")
local gui = LocalPlayer:WaitForChild("PlayerGui")

-- H√†m l·∫•y ph√∫t hi·ªán t·∫°i t·ª´ server GUI
local function getServerMinute()
    for _, g in ipairs(gui:GetDescendants()) do
        if g:IsA("TextLabel") then
            local text = g.Text
            local hour, minute, second = string.match(text, "Servertime:%s*(%d+):(%d+):(%d+)")
            if hour and minute and second then
                print("üïí Servertime:", hour, minute, second)
                return tonumber(minute)
            end
        end
    end
    return nil
end

-- ƒê·ª£i ƒë·∫øn khi GUI hi·ªán Servertime
local serverMinute
repeat
    serverMinute = getServerMinute()
    wait(0.5)
until serverMinute

print("‚úÖ Server minute:", serverMinute)

local jobId = game.JobId
local placeId = game.PlaceId

-- ===== Katakuri Boss =====
if placeId == 16190471004 then
    local delayTime
    if serverMinute >= 25 and serverMinute <= 31 then
        delayTime = os.time()
        print("üöÄ Katakuri: G·ª≠i ngay")
    elseif serverMinute < 24 then
        delayTime = os.time() + (24 - serverMinute) * 60
        print("‚è≥ Katakuri: S·∫Ω g·ª≠i l√∫c ph√∫t 24")
    end

    if delayTime then
        local url = string.format(
            "https://script.google.com/macros/s/AKfycbxyCIRzSoA7yqrEbD4ugjSIbquMVRsEqmZB4BahbnK3XshyxQaOdXZOC6yYQ6LrvDw/exec?jobid=%s&placeid=%s&delay=%d&boss=true",
            jobId, placeId, delayTime
        )

        local success, response = pcall(function()
            return a({ Url = url, Method = "GET" })
        end)

        if success then
            print("‚úÖ Katakuri sent:", response.Body)
        else
            warn("‚ùå Katakuri send failed:", response)
        end
    end
end

-- ===== Map th∆∞·ªùng (boss=false) =====
do
    local delayTime
    if serverMinute > 54 then
        delayTime = os.time()
        print("üöÄ Map th∆∞·ªùng: G·ª≠i ngay")
    else
        delayTime = os.time() + (54 - serverMinute) * 60
        print("‚è≥ Map th∆∞·ªùng: S·∫Ω g·ª≠i l√∫c ph√∫t 54")
    end

    local url = string.format(
        "https://script.google.com/macros/s/AKfycbxyCIRzSoA7yqrEbD4ugjSIbquMVRsEqmZB4BahbnK3XshyxQaOdXZOC6yYQ6LrvDw/exec?jobid=%s&placeid=%s&delay=%d&boss=false",
        jobId, placeId, delayTime
    )

    local success, response = pcall(function()
        return a({ Url = url, Method = "GET" })
    end)

    if success then
        print("‚úÖ Map th∆∞·ªùng sent:", response.Body)
    else
        warn("‚ùå Map th∆∞·ªùng send failed:", response)
    end
end
