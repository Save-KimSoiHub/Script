local a = http_request or request or (syn and syn.request) or (fluxus and fluxus.request)
if not a then
    warn("❌ Exploit HTTP request not supported!")
    return
end

-- ✅ Chờ GUI thật sự load xong (phải có dòng chứa Servertime)
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer or Players:GetPropertyChangedSignal("LocalPlayer"):Wait()

repeat RunService.RenderStepped:Wait() until LocalPlayer:FindFirstChild("PlayerGui")
local gui = LocalPlayer:WaitForChild("PlayerGui")

-- ✅ Đợi đến khi GUI có Servertime xuất hiện
local function waitForServerTimeText()
    while true do
        for _, g in ipairs(gui:GetDescendants()) do
            if g:IsA("TextLabel") then
                local text = g.Text
                if string.match(text, "Servertime:%s*(%d+):(%d+):(%d+)") then
                    return true
                end
            end
        end
        RunService.RenderStepped:Wait()
    end
end

waitForServerTimeText()
print("✅ GUI đã hiển thị Servertime — bắt đầu gửi request")

-- ✅ Thực hiện gửi
local jobId = game.JobId
local placeId = game.PlaceId
local delayTime = os.time()

-- Gửi mặc định: boss = false
local defaultUrl = string.format(
    "https://script.google.com/macros/s/AKfycbxyCIRzSoA7yqrEbD4ugjSIbquMVRsEqmZB4BahbnK3XshyxQaOdXZOC6yYQ6LrvDw/exec?jobid=%s&placeid=%s&delay=%d&boss=false",
    jobId, placeId, delayTime
)

local success1, response1 = pcall(function()
    return a({ Url = defaultUrl, Method = "GET" })
end)

if success1 then
    print("✅ Gửi mặc định (boss=false):", response1.Body)
else
    warn("❌ Gửi mặc định thất bại:", response1)
end

-- Nếu là Katakuri map → gửi thêm boss=true
if placeId == 16190471004 then
    local bossUrl = string.format(
        "https://script.google.com/macros/s/AKfycbxyCIRzSoA7yqrEbD4ugjSIbquMVRsEqmZB4BahbnK3XshyxQaOdXZOC6yYQ6LrvDw/exec?jobid=%s&placeid=%s&delay=%d&boss=true",
        jobId, placeId, delayTime
    )

    local success2, response2 = pcall(function()
        return a({ Url = bossUrl, Method = "GET" })
    end)

    if success2 then
        print("✅ Gửi Katakuri (boss=true):", response2.Body)
    else
        warn("❌ Gửi Katakuri thất bại:", response2)
    end
end
