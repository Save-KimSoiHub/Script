local a = http_request or request or (syn and syn.request) or (fluxus and fluxus.request)
if not a then
    warn("‚ùå Exploit HTTP request not supported!")
    return
end

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer or Players:GetPropertyChangedSignal("LocalPlayer"):Wait()

repeat RunService.RenderStepped:Wait() until LocalPlayer:FindFirstChild("PlayerGui")
local gui = LocalPlayer:WaitForChild("PlayerGui")

local function formatTime(seconds)
    local m = math.floor(seconds / 60)
    local s = math.floor(seconds % 60)
    return string.format("%d(m):%02d(s)", m, s)
end

-- üìå L·∫•y ph√∫t v√† gi√¢y t·ª´ Servertime
local function getServerMinuteAndSecond()
    while true do
        for _, g in ipairs(gui:GetDescendants()) do
            if g:IsA("TextLabel") then
                local _, minute, second = string.match(g.Text, "Servertime:%s*(%d+):(%d+):(%d+)")
                if minute and second then
                    return tonumber(minute), tonumber(second)
                end
            end
        end
        RunService.RenderStepped:Wait()
    end
end

local serverMinute, serverSecond = getServerMinuteAndSecond()
local serverTotalSec = serverMinute * 60 + serverSecond
print(string.format("‚úÖ Server time: %02d:%02d (%d gi√¢y)", serverMinute, serverSecond, serverTotalSec))

local jobId = game.JobId
local placeId = game.PlaceId
local delayTime
local becomeAround

-- ===== Katakuri logic (boss = true) =====
if placeId == 16190471004 then
    if serverMinute >= 25 and serverMinute <= 30 then
        delayTime = os.time()
        becomeAround = (30 * 60) - serverTotalSec
        print("üöÄ Katakuri: G·ª≠i ngay (boss=true)")
    elseif serverMinute < 24 then
        delayTime = os.time() + ((24 * 60) - serverTotalSec)
        becomeAround = (30 * 60) - (24 * 60)
        print("‚è≥ Katakuri: S·∫Ω g·ª≠i l√∫c ph√∫t 24 (boss=true)")
    else
        delayTime = nil
        becomeAround = nil
    end

    if delayTime and becomeAround then
    local bossUrl = string.format(
        "https://script.google.com/macros/s/AKfycbxyCIRzSoA7yqrEbD4ugjSIbquMVRsEqmZB4BahbnK3XshyxQaOdXZOC6yYQ6LrvDw/exec?jobid=%s&placeid=%s&delay=%d&boss=true&becomearound=%s",
        jobId, placeId, delayTime, formatTime(becomeAround)
    )

        local success, response = pcall(function()
            return a({ Url = bossUrl, Method = "GET" })
        end)

        if success then
            print("‚úÖ G·ª≠i Katakuri (boss=true):", response.Body)
        else
            warn("‚ùå G·ª≠i Katakuri th·∫•t b·∫°i:", response)
        end
    end
end

-- ===== M·∫∑c ƒë·ªãnh: boss = false (√°p d·ª•ng cho t·∫•t c·∫£) =====
do
    if serverMinute > 54 then
        delayTime = os.time()
        becomeAround = (60 * 60) - serverTotalSec
        print("üöÄ G·ª≠i ngay boss=false")
    else
        delayTime = os.time() + ((54 * 60) - serverTotalSec)
        becomeAround = (60 * 60) - (54 * 60)
        print("‚è≥ S·∫Ω g·ª≠i l√∫c ph√∫t 54 (boss=false)")
    end

    local defaultUrl = string.format(
        "https://script.google.com/macros/s/AKfycbxyCIRzSoA7yqrEbD4ugjSIbquMVRsEqmZB4BahbnK3XshyxQaOdXZOC6yYQ6LrvDw/exec?jobid=%s&placeid=%s&delay=%d&boss=false&becomearound=%s",
        jobId, placeId, delayTime, formatTime(becomeAround)
    )

    local success1, response1 = pcall(function()
        return a({ Url = defaultUrl, Method = "GET" })
    end)

    if success1 then
        print("‚úÖ G·ª≠i m·∫∑c ƒë·ªãnh (boss=false):", response1.Body)
    else
        warn("‚ùå G·ª≠i m·∫∑c ƒë·ªãnh th·∫•t b·∫°i:", response1)
    end
end
