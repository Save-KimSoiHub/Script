--// CONFIG
local webhookUrl = "https://discord.com/api/webhooks/1392855897461751829/rMyqsqnlcKtuBi2HYGTeEpCsgqVnS0RdEEjDmiaDJCYL6tJyKkHjXixULRNOHe2MWHSd" -- Thay webhook c·ªßa b·∫°n ·ªü ƒë√¢y
local intervalSeconds = 60

--// SERVICES
local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")

--// GET PLAYER & MAIN DATA
local player = Players.LocalPlayer
local mainData = player:WaitForChild("MAIN_DATA")
local displayName = player.DisplayName
local playerGui = player:WaitForChild("PlayerGui")
local ui = playerGui:WaitForChild("UI")
local hud = ui:WaitForChild("HUD")

--// HTTP Request function
local request = http_request or request or (syn and syn.request) or (fluxus and fluxus.request) or (http and http.request)
if not request then
    return warn("‚ùå Executor kh√¥ng h·ªó tr·ª£ HTTP Request!")
end

--// LOOP
task.spawn(function()
    while true do
        -- L·∫•y d·ªØ li·ªáu
        local gems = mainData:FindFirstChild("Gems") and mainData.Gems.Value or "N/A"
        local bossKills = mainData:FindFirstChild("BossKills") and mainData.BossKills.Value or "N/A"
        local titlesFolder = mainData:FindFirstChild("Titles")
        local titleCount = titlesFolder and #titlesFolder:GetChildren() or 0
        local expText = hud:FindFirstChild("EXP") and hud.EXP:FindFirstChild("Shadow") and hud.EXP.Shadow.Text or "?"
        local levelText = hud:FindFirstChild("Level") and hud.Level:FindFirstChild("Shadow") and hud.Level.Shadow.Text or "?"

        -- Build description (gi·ªëng ·∫£nh m·∫´u)
        local description = string.format([[
üßë Username: **%s**

üìä **Stats**
üíé Gems: [ %s ]
‚ò†Ô∏è Boss Kills: [ %s ]
üè∑Ô∏è Titles: [ %s ]
üìà Level: [ %s ]
üß™ EXP: [ %s ]
        ]],
        displayName, gems, bossKills, titleCount, levelText, expText)

        -- Embed format
        local embedData = {
            title = "üëë KimSoi Hub Stats Report üëë",
            description = description,
            color = 0x2F3136, -- Dark grey like your image
            footer = { text = "‚è∞ Updated every " .. intervalSeconds .. " seconds" }
        }

        local body = HttpService:JSONEncode({
            username = "KimSoi Hub Webhook",
            embeds = { embedData }
        })

        local response = request({
            Url = webhookUrl,
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = body
        })

        print("‚úÖ G·ª≠i embed th√†nh c√¥ng - Status:", response.StatusCode)
        task.wait(intervalSeconds)
    end
end)
